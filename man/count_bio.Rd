% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mycount.R
\name{count_bio}
\alias{count_bio}
\title{Count events with optional incidence rates and exact Poisson CI}
\usage{
count_bio(
  x,
  ...,
  events = NULL,
  person_time = NULL,
  per = 1,
  sort = FALSE,
  name = NULL,
  .drop = dplyr::group_by_drop_default(x),
  conf_level = 0.95
)
}
\arguments{
\item{x}{A data frame.}

\item{...}{Variables to group by.}

\item{events}{Optional numeric (typically 0/1 or non-negative counts).
If \code{NULL}, the function uses \code{dplyr::n()} to count rows.}

\item{person_time}{Optional non-negative numeric column giving person-time.
If supplied, the output will include person-time and incidence rates.}

\item{per}{Positive scalar used to scale the rate
(for example, \code{per = 100} gives rates per 100 person-time units).}

\item{sort}{Logical. If \code{TRUE}, sort the result by the event count
in descending order.}

\item{name}{Name of the event count column. If \code{NULL}, a name like
\code{"n"}, \code{"nn"}, ... is chosen to avoid overwriting existing columns.}

\item{.drop}{Passed on to \code{\link[dplyr:group_by]{dplyr::group_by()}}.}

\item{conf_level}{Confidence level for the Poisson confidence interval.
Must be a number between 0 and 1 (default is 0.95).}
}
\value{
A data frame with the grouping columns, the event count column
(\code{name}), and, if \code{person_time} is supplied, extra columns:
\code{pt} (total person-time), \code{rate}, \code{rate_lcl}, \code{rate_ucl}.
}
\description{
\code{count_bio()} is a small helper that works a bit like \code{\link[dplyr:count]{dplyr::count()}}:
it does a grouped count, and optionally also sums person-time and returns
incidence rates with Garwood (exact Poisson) confidence intervals.
}
\examples{
library(dplyr)

# toy data
df <- tibble(
  trt = rep(c("A", "B"), each = 5),
  events = rbinom(10, 1, 0.3),
  pt = rexp(10, rate = 0.2)
)

# just counts, similar to dplyr::count()
count_bio(df, trt)

# counts + person-time + incidence rates per 100 person-time units
count_bio(df, trt,
          events = events,
          person_time = pt,
          per = 100)

}
